- content_for :title do
  = @plugin.name

- content_for :head do
  :javascript
    var post_data = function(){
      _post_data = {};
      var fields = $('.field');
      for(var i = 0; i < fields.length; i++){
        var field = fields[i];
        _post_data[field.name] = field.value;
      }
      return _post_data;
    };

    $(function(){
      $("#btn_submit").click(function(){
        console.log("submit");
        fishbowl.io.push("plugin_#{@plugin.name}", post_data());
      });

      $("#call").text( 'io.push("plugin_#{@plugin.name}",'+JSON.stringify(post_data())+');' );
    });

%ul#fields
  - @plugin.fields.values.sort{|a,b| a[:index] <=> b[:index] }.each do |field|
    %li
      #{field[:name]} : 
      %input{:type => :text, :size => 40, :value => field[:default], :class => "field", :name => field[:name]}
  %li
    %input{:type => :button, :value => "submit", :id => "btn_submit"}
%h2 code
%div#call
